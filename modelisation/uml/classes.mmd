%% MyBooking â€” UML Class Diagram (Mermaid)
%% Compatible avec MERISE/MPD et APIs

classDiagram

  class User {
    +Long id
    +String firstName
    +String lastName
    +String email
    +String passwordHash
    +LocalDate birthdate
    +String phone
    +String address
    +Instant createdAt
    +Instant updatedAt
  }

  class Role {
    +Integer id
    +RoleCode code
    +String label
  }

  class RoleCode {
    <<enumeration>>
    CLIENT
    EMPLOYE
    ADMIN
  }

  class NotificationPreference {
    +boolean emailEnabled
    +boolean smsEnabled
  }

  class Employee {
    +User user (1..1)
    +EmployeeStatus status
    +String jobTitle
  }

  class EmployeeStatus {
    <<enumeration>>
    ACTIVE
    INACTIVE
  }

  class Room {
    +Long id
    +String number
    +RoomType roomType
    +int capacity
    +BigDecimal price
    +String currency
    +RoomStatus status
    +String description
  }

  class RoomType {
    <<enumeration>>
    SINGLE
    DOUBLE
    SUITE
    FAMILY
  }

  class RoomStatus {
    <<enumeration>>
    AVAILABLE
    OCCUPIED
    OUT_OF_SERVICE
  }

  class Equipment {
    +Integer id
    +String name
  }

  class RoomPhoto {
    +Long id
    +String url
  }

  class RoomStatusUpdate {
    +Long id
    +RoomCleanStatus status
    +String note
    +Instant at
  }

  class RoomCleanStatus {
    <<enumeration>>
    PROPRE
    SALE
    HORS_SERVICE
  }

  class Reservation {
    +Long id
    +LocalDate checkIn
    +LocalDate checkOut
    +ReservationStatus status
    +int guests
    +BigDecimal total
    +String currency
    +int usedPoints
  }

  class ReservationStatus {
    <<enumeration>>
    CONFIRMED
    CANCELLED
  }

  class Feedback {
    +Long id
    +int rating (1..5)
    +String comment
    +Instant createdAt
  }

  class FeedbackReply {
    +Long id
    +String message
    +Instant createdAt
  }

  class LoyaltyAccount {
    +Long id
    +int balance
  }

  class LoyaltyTransaction {
    +Long id
    +LoyaltyTxType type
    +int points
    +Instant createdAt
  }

  class LoyaltyTxType {
    <<enumeration>>
    EARN
    REDEEM
  }

  class Event {
    +Long id
    +String title
    +EventType eventType
    +Instant startAt
    +Instant endAt
    +int capacity
    +String description
    +BigDecimal price
    +String currency
  }

  class EventType {
    <<enumeration>>
    SPA
    CONFERENCE
    YOGA_CLASS
    FITNESS
    WEDDING
  }

  class EventBooking {
    +Long id
    +int participants
    +EventBookingStatus status
    +Instant createdAt
    +BigDecimal totalPrice
    +String currency
  }

  class EventBookingStatus {
    <<enumeration>>
    PENDING
    CONFIRMED
    CANCELLED
  }

  class Announcement {
    +Long id
    +String title
    +String body
    +Instant createdAt
  }

  class AnnouncementReply {
    +Long id
    +String message
    +Instant createdAt
  }

  class EmployeeTask {
    +Long id
    +String title
    +String description
    +TaskStatus status
    +String note
    +String photoUrl
    +Instant createdAt
    +Instant updatedAt
  }

  class TaskStatus {
    <<enumeration>>
    TODO
    IN_PROGRESS
    DONE
  }

  class Shift {
    +Long id
    +Instant startAt
    +Instant endAt
  }

  class LeaveRequest {
    +Long id
    +LocalDate fromDate
    +LocalDate toDate
    +LeaveStatus status
    +String reason
  }

  class LeaveStatus {
    <<enumeration>>
    PENDING
    APPROVED
    REJECTED
  }

  class Training {
    +Integer id
    +String title
  }

  class EmployeeTraining {
    +EmployeeTrainingStatus status
    +Instant assignedAt
    +Instant completedAt
  }

  class EmployeeTrainingStatus {
    <<enumeration>>
    ASSIGNED
    COMPLETED
  }

  class EventNotification {
    +Long id
    +NotificationChannel channel
    +String subject
    +String body
    +Instant createdAt
  }

  class NotificationChannel {
    <<enumeration>>
    EMAIL
    SMS
  }

  %% Associations
  User "1" -- "1" NotificationPreference : has
  User "*" -- "*" Role : roles
  User "1" -- "0..1" Employee : profile
  User "1" -- "*" Reservation : makes
  User "1" -- "*" Feedback : writes
  User "1" -- "*" EventBooking : books
  User "1" -- "*" RoomStatusUpdate : updates
  User "1" -- "*" AnnouncementReply : replies

  Reservation "*" -- "1" Room : room
  Reservation "1" -- "*" Feedback : feedbacks
  Feedback "1" -- "0..1" FeedbackReply : reply
  User "1" -- "*" FeedbackReply : authoredBy

  Room "1" -- "*" RoomPhoto : photos
  Room "*" -- "*" Equipment : equipments
  Room "1" -- "*" RoomStatusUpdate : statusLogs

  LoyaltyAccount "1" -- "*" LoyaltyTransaction : entries
  User "1" -- "1" LoyaltyAccount : account
  LoyaltyTransaction "0..*" -- "0..1" Reservation : reservation

  Event "1" -- "*" EventBooking : bookings
  Event "1" -- "*" EventNotification : notifications
  User "1" -- "*" EventNotification : createdBy

  Announcement "1" -- "*" AnnouncementReply : replies

  Employee "1" -- "*" EmployeeTask : tasks
  Employee "1" -- "*" Shift : shifts
  Employee "1" -- "*" LeaveRequest : leaves
  Training "1" -- "*" EmployeeTraining : assignments
  Employee "1" -- "*" EmployeeTraining : trainings

